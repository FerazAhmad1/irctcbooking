{"version":3,"file":"schema.js","sourceRoot":"/","sources":["v1/helper.ts/schema.ts"],"names":[],"mappings":"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","sourcesContent":["import joi from \"joi\";\nimport moment from \"moment\";\n\n// const moment = require('moment');\n\n// Define a custom date format validation schema using Joi's custom method\nconst person_schema = joi.object({\n  first_name: joi\n    .string()\n    .trim()\n    .min(3)\n    .max(255)\n    .pattern(/^[A-Za-z]+$/)\n    .required(),\n  last_name: joi\n    .string()\n    .trim()\n    .min(3)\n    .max(255)\n    .pattern(/^[A-Za-z]+$/)\n    .required(),\n  dob: joi.date().iso().required(),\n});\n\nconst customDateFormat = joi\n  .string()\n  .regex(/^\\d{4}-\\d{2}-\\d{2}$/)\n  .custom((value, helpers) => {\n    const date = moment(value, \"YYYY-MM-DD\", true);\n    if (!date.isValid()) {\n      return helpers.error(\"any.invalid\");\n    }\n\n    const now = moment();\n    const maxDate = moment().add(4, \"months\");\n\n    if (date.isBefore(now, \"day\")) {\n      return helpers.error(\"date.min\", { limit: now.format(\"YYYY-MM-DD\") });\n    }\n\n    if (date.isAfter(maxDate, \"day\")) {\n      return helpers.error(\"date.max\", { limit: maxDate.format(\"YYYY-MM-DD\") });\n    }\n\n    return value;\n  })\n  .messages({\n    \"string.pattern.base\": `\"date\" must be in the format YYYY-MM-DD`,\n    \"date.min\": `\"date\" cannot be in the past. Minimum allowed date is today`,\n    \"date.max\": `\"date\" cannot be more than four months in the future.`,\n    \"any.invalid\": `\"date\" must be a valid date in the format YYYY-MM-DD`,\n  });\n\nexport const signupSchema = joi.object({\n  firstName: joi\n    .string()\n    .trim()\n    .pattern(/^[A-Za-z]+$/)\n    .min(3)\n    .max(255)\n    .required(),\n  lastName: joi\n    .string()\n    .trim()\n    .pattern(/^[A-Za-z]+$/)\n    .min(3)\n    .max(255)\n    .required(),\n  mobile: joi\n    .string()\n    .trim()\n    .pattern(/^[1-9]\\d*$/)\n    .length(10)\n    .required(),\n  email: joi.string().trim().email().required(),\n  password: joi.string().trim().min(8).required(),\n});\n\nexport const login_schema = joi.object({\n  email: joi.string().trim().email().required(),\n  password: joi.string().min(8).max(255).required(),\n});\n\nexport const reserve_ticket_schema = joi.object({\n  from: joi.string().min(2).max(255).required(),\n  to: joi.string().min(2).max(255).required(),\n  startdate: customDateFormat.required(),\n  trainnumber: joi\n    .string()\n    .pattern(/^[1-9]\\d*$/)\n    .length(5)\n    .required(),\n  mobile: joi\n    .string()\n    .pattern(/^[1-9]\\d*$/)\n    .length(10)\n    .required(),\n  familymobile: joi\n    .string()\n    .pattern(/^[1-9]\\d*$/)\n    .length(10)\n    .required(),\n  customers: joi.array().items(person_schema).min(1).max(4).required(),\n  email: joi.string().email().required(),\n  district: joi.string().min(3).max(255),\n  country: joi.string().min(3).max(255),\n  pincode: joi\n    .string()\n    .pattern(/^[1-9]\\d*$/)\n    .length(6)\n    .required(),\n  state: joi.string().min(3).max(255).required(),\n});\n\nexport const search_train_schema = joi.object({\n  from: joi.string().min(2).max(255).required(),\n  to: joi.string().min(2).max(255).required(),\n  date_of_journey: customDateFormat.required(),\n});\n\nexport const forgot_password_schema = joi.object({\n  email: joi.string().trim().email().required(),\n});\n\nexport const reset_password_schema = joi.object({\n  password: joi.string().trim().min(8).max(255).required(),\n});\n\nexport const general_ticket_schema = joi.object({\n  from: joi.string().min(2).max(255).required(),\n  to: joi.string().min(2).max(255).required(),\n  train_type: joi.string().valid(\"SF\", \"EX\").required(),\n  quantity: joi.number().min(1).max(4).required(),\n});\n\nexport const cancel_ticket_schema = joi.object({\n  pnr: joi.string().length(10).required(),\n});\n"]}